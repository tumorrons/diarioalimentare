/* ===== PRINT.CSS - STILI OTTIMIZZATI PER STAMPA ===== */

@media print {
    /* Reset globale per stampa */
    * {
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
        box-shadow: none !important;
    }
    
    body {
        background: white !important;
        font-size: 9px !important;
        line-height: 1.1 !important;
        margin: 5mm !important;
        color: #000 !important;
        font-family: Arial, sans-serif !important;
    }
    
    /* Nascondi elementi non necessari per la stampa */
    .header, 
    .navigation, 
    .print-controls, 
    .back-btn,
    .nav-buttons,
    .utility-buttons,
    .add-meal-section,
    .photo-buttons,
    .meal-actions,
    .archive-actions,
    .edit-btn,
    .delete-btn,
    .breadcrumb {
        display: none !important;
    }
    
    .container {
        max-width: 100% !important;
        padding: 0 !important;
        margin: 0 !important;
    }
    
    /* Contenuto stampa */
    .print-content {
        width: 100% !important;
        margin: 0 !important;
        padding: 0 !important;
    }
    
    /* Header stampa */
    .print-header {
        text-align: center !important;
        margin-bottom: 8px !important;
        font-size: 14px !important;
        font-weight: bold !important;
        color: #000 !important;
        border-bottom: 2px solid #667eea !important;
        padding-bottom: 5px !important;
        page-break-after: avoid !important;
    }
    
    /* Statistiche */
    .print-stats {
        display: flex !important;
        justify-content: space-around !important;
        margin-bottom: 8px !important;
        background: #f0f0f0 !important;
        padding: 5px !important;
        border-radius: 3px !important;
        font-size: 8px !important;
        page-break-after: avoid !important;
    }
    
    .print-stat {
        text-align: center !important;
        flex: 1 !important;
    }
    
    .print-stat-number {
        font-weight: bold !important;
        font-size: 10px !important;
        color: #667eea !important;
        display: block !important;
    }
    
    /* Tabella mensile */
    .print-month-table {
        width: 100% !important;
        border-collapse: collapse !important;
        font-size: 7px !important;
        table-layout: fixed !important;
        margin-bottom: 8px !important;
    }
    
    .print-day-row {
        border-bottom: 1px solid #ddd !important;
        page-break-inside: avoid !important;
        height: 15mm !important;
        vertical-align: top !important;
    }
    
    .print-day-row.day-weekend {
        background: #fff3cd !important;
    }
    
    .print-day-row.day-today {
        background: rgba(39, 174, 96, 0.1) !important;
        border-left: 3px solid #27ae60 !important;
    }
    
    .print-day-cell {
        width: 25mm !important;
        min-width: 25mm !important;
        max-width: 25mm !important;
        font-size: 8px !important;
        font-weight: bold !important;
        text-align: center !important;
        background: #f8f9fa !important;
        border-right: 1px solid #ddd !important;
        padding: 2px !important;
        vertical-align: middle !important;
    }
    
    .print-day-cell .day-number {
        font-size: 12px !important;
        display: block !important;
        margin-top: 2px !important;
    }
    
    .print-meals-cell {
        padding: 2px 4px !important;
        font-size: 6px !important;
        line-height: 1.1 !important;
        vertical-align: top !important;
        overflow: hidden !important;
    }
    
    /* Elementi pasto */
    .print-meal-item {
        display: block !important;
        margin-bottom: 1px !important;
        padding: 1px 3px !important;
        border-left: 2px solid #667eea !important;
        background: rgba(102, 126, 234, 0.1) !important;
        border-radius: 2px !important;
        break-inside: avoid !important;
        overflow: hidden !important;
    }
    
    .print-meal-type {
        background: #667eea !important;
        color: white !important;
        padding: 1px 3px !important;
        border-radius: 2px !important;
        font-size: 5px !important;
        margin-right: 2px !important;
        display: inline-block !important;
    }
    
    .print-meal-time {
        font-size: 5px !important;
        color: #666 !important;
        margin-right: 2px !important;
    }
    
    .print-meal-food {
        font-weight: bold !important;
        font-size: 6px !important;
        display: inline !important;
        margin-right: 2px !important;
    }
    
    .print-meal-notes {
        font-size: 5px !important;
        color: #666 !important;
        font-style: italic !important;
        display: block !important;
        margin-top: 1px !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        white-space: nowrap !important;
    }
    
    .print-meal-photos {
        margin-top: 1px !important;
        display: inline-block !important;
    }
    
    .print-photo-indicator {
        display: inline-block !important;
        width: 4px !important;
        height: 4px !important;
        border-radius: 1px !important;
        margin-right: 1px !important;
        vertical-align: middle !important;
    }
    
    .print-photo-indicator.before {
        background: #4CAF50 !important;
    }
    
    .print-photo-indicator.after {
        background: #ff9ff3 !important;
    }
    
    .print-empty-day {
        color: #999 !important;
        font-style: italic !important;
        font-size: 6px !important;
        text-align: center !important;
        padding: 3px !important;
    }
    
    /* Footer stampa */
    .print-footer {
        margin-top: 8px !important;
        text-align: center !important;
        font-size: 6px !important;
        color: #666 !important;
        border-top: 1px solid #ddd !important;
        padding-top: 3px !important;
        page-break-inside: avoid !important;
    }
    
    /* Gestione interruzioni pagina */
    .print-document {
        page-break-before: auto !important;
        page-break-after: auto !important;
    }
    
    .print-stats {
        page-break-after: avoid !important;
    }
    
    .print-month-table {
        page-break-before: avoid !important;
    }
    
    /* Per stampa dettagliata */
    .meal-day {
        page-break-inside: avoid !important;
        margin-bottom: 15px !important;
        border: 1px solid #ddd !important;
        border-radius: 5px !important;
        overflow: hidden !important;
    }
    
    .day-header {
        background: #f0f0f0 !important;
        padding: 8px !important;
        font-weight: bold !important;
        font-size: 10px !important;
        border-bottom: 1px solid #ddd !important;
    }
    
    .meal-item {
        margin: 8px !important;
        padding: 8px !important;
        border-left: 3px solid #667eea !important;
        background: rgba(102, 126, 234, 0.05) !important;
    }
    
    .meal-type {
        background: #667eea !important;
        color: white !important;
        padding: 2px 6px !important;
        border-radius: 3px !important;
        font-size: 8px !important;
        margin-right: 5px !important;
    }
    
    .meal-time {
        color: #666 !important;
        font-size: 8px !important;
        margin-right: 8px !important;
    }
    
    .meal-food {
        font-weight: bold !important;
        font-size: 9px !important;
        margin: 3px 0 !important;
    }
    
    .meal-notes {
        color: #666 !important;
        font-style: italic !important;
        font-size: 7px !important;
        margin-top: 3px !important;
    }
    
    .meal-photos {
        margin-top: 3px !important;
        font-size: 7px !important;
    }
    
    .photo-indicator {
        display: inline-block !important;
        width: 8px !important;
        height: 8px !important;
        border-radius: 50% !important;
        margin-right: 3px !important;
        vertical-align: middle !important;
    }
    
    .photo-before {
        background: #4CAF50 !important;
    }
    
    .photo-after {
        background: #ff9ff3 !important;
    }
    
    /* Nascondere immagini vere per risparmiare inchiostro */
    .meal-photo, 
    .photo-preview img,
    img:not(.print-allowed) {
        display: none !important;
    }
    
    /* Ottimizzazioni per stampanti economiche */
    @media print and (monochrome) {
        .print-stat-number {
            color: #000 !important;
        }
        
        .print-meal-type {
            background: #000 !important;
            color: white !important;
        }
        
        .print-photo-indicator.before {
            background: #333 !important;
        }
        
        .print-photo-indicator.after {
            background: #666 !important;
        }
        
        .print-day-row.day-weekend {
            background: #f5f5f5 !important;
        }
        
        .print-day-row.day-today {
            background: #e5e5e5 !important;
            border-left: 3px solid #000 !important;
        }
    }
    
    /* Margini pagina */
    @page {
        margin: 15mm 10mm !important;
        size: A4 !important;
    }
    
    @page :first {
        margin-top: 20mm !important;
    }
    
    /* Headers e footers di pagina */
    @page :left {
        margin-left: 15mm !important;
    }
    
    @page :right {
        margin-right: 15mm !important;
    }
    
    /* Evita interruzioni indesiderate */
    h1, h2, h3, h4, h5, h6 {
        page-break-after: avoid !important;
    }
    
    /* Ottimizzazioni per layout compatto */
    .print-compact .print-day-row {
        height: 12mm !important;
    }
    
    .print-compact .print-meal-item {
        margin-bottom: 0 !important;
        padding: 1px 2px !important;
    }
    
    .print-compact .print-meal-notes {
        display: none !important;
    }
    
    /* Stili per lista cronologica */
    .print-list .meal-entry {
        margin-bottom: 10px !important;
        padding: 8px !important;
        border: 1px solid #ddd !important;
        border-radius: 3px !important;
        page-break-inside: avoid !important;
    }
    
    .print-list .meal-header {
        display: flex !important;
        justify-content: space-between !important;
        align-items: center !important;
        margin-bottom: 5px !important;
    }
    
    .print-list .meal-type-badge {
        background: #667eea !important;
        color: white !important;
        padding: 2px 6px !important;
        border-radius: 3px !important;
        font-size: 7px !important;
    }
    
    /* Controlli di qualità stampa */
    .print-quality-high {
        font-size: 8px !important;
        line-height: 1.2 !important;
    }
    
    .print-quality-draft {
        font-size: 7px !important;
        line-height: 1.0 !important;
        background: none !important;
        color: #000 !important;
    }
    
    .print-quality-draft .print-photo-indicator,
    .print-quality-draft .print-meal-type {
        display: none !important;
    }
}